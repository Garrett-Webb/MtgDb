# MtgDb
Magic: The Gathering API full cached database.

## Description
This repository consists of:
* All cards and misc data which can be obtained from MTG API.
  Each json file is newline-d and indented for human-readable diff by git.
  They are committed and timestamps are recorded by git.
* Build script, which merges all data, outputs as a compact json without
  newlines and indents, and compresses it.
* Update script, which fetches all data from MTG API again.

## Magic: The Gathering API official site
https://magicthegathering.io/

## Directories
* data/
  * Splitted and formatted json data.
    Especially card data is devided into 256 parts with starting two characters
	ofp card ID. (SHA-1 hash)
* dist/
  * Compacted json and zip generated by `build.py`.
* src/
  * Update and build scripts.

## Install tools (Debian case)
git and python 3.5 required.
```
sudo apt install git
sudo apt install python-3
```

## How to build a simplified single json and zip
Version info (git commit info) will be included automatically.
`git` command is required in your PATH.
```
# build to dist/
python3 src/build.py

# clean
rm -r dist/
```

## How to update the data/ dir
```
# all
python3 src/mtg.py

# individual update
python3 src/mtg.py help
python3 src/mtg.py <task> ...

# diff
git diff

# git commit
git commit -a
```
